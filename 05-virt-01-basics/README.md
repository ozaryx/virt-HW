
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Ответ:

Отличие в том на каком уровне абстракции аппаратного обеспечения работает виртуализация.
- Полная виртуализация работает на самом низком уровне абстракции, поскольку гипервизор является ОС и сам содержит драйвера 
устройств и обеспечивает доступ ВМ к аппаратным ресурсам. Платформа гостевой ОС может отличаться от хостовой ОС. Ядро гостевой 
ОС остается без изменений.
- Паравиртуализация - гипервизор работает поверх ОС, которая и обеспечивает необходимый уровень абстракции аппаратных ресурсов. 
Гипервизор обеспечивает разграничение доступа к аппаратным ресурсам. Платформа гостевой ОС может отличаться от хостовой ОС. 
Ядро гостевой ОС модифицируется гипервизором для доступа к аппаратным ресурсам.
- виртуализации на основе ОС, а точнее контейниризация, используется средства ОС для ограничения доступа к аппаратным ресурсам, 
в Линукс это механизмы namespace и cgroups. По сути процессы запускаются в контейнере, который ограничивает область видимости 
процесса и доступ к ресурсам. Поэтому запустить другу ОС в контейнере невозможно. Процессы запускаемые в контейнере используют 
ядро хостовой ОС.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Ответ:
- физические сервера - Высоконагруженная база данных, чувствительная к отказу и Системы, и выполняющие высокопроизводительные 
расчеты на GPU. Аппаратные ресурсы в таком случае полностью отдаются выполняемой задаче. Нет "шумных соседей", нет паразитной 
нагрузки на обслуживание запросов гипервизора.
- паравиртуализация - Windows системы для использования бухгалтерским отделом. Паравиртуализация позволяет запустить ВМ 
на отличной ОС. Обычно клиентские РС не являются ни высоконагруженными, ни критичными. Скорость поднятия таких ВМ из шаблона 
или перезагрузки ВМ в случае зависания или падения позволяют добиться требуемого уровня доступности. При этом максимально 
утилизируются аппаратные ресурсы комплекса. 
- виртуализация уровня ОС - Различные web-приложения. web-приложения нужно запускать в контейнерах, поскольку таким образом 
достигаются необходимые цели виртуализации - ограничение доступа к ресурсам, ограничение userspace, утилизация ресурсов 
сервера. При этом нет необходимости запуска ВМ на другой платформе. Скорость поднятия упавшего сервиса также является 
плюсом данного подхода.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based 
инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного 
механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) 
инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Ответ:
1. Hyper-V Server или VMWare vSphere. Hyper-V Server предпочтительнее, поскольку преимущественно используется Windows. Оба 
решения предоставляют балансировку нагрузки в кластере, репликацию данных, миграцию ВМ. Linux в качестве гостевой ОС 
поддерживается обоими гипервизорами.
2. KVM либо Xen PV. Эти гипервизоры являются опенсорс решениями и в то же время достаточно производительны и совместимы 
с Linux и Windows гостевыми ОС.
3. Hyper-V Server. Это максимально совместимое решение с Windows инфраструктуры, а также производительное, 
поскольку Hyper-V Server работает в режиме полной виртуализвации. Но если нужно совсем бесплатное решение, то это Xen PV или KVM.
4. Контейниризация на основе LXC, Docker, Podman. Поскольку ядро ОС одно и тоже, нет необходимости использования гипервизора
полной или пара- виртуализации.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления 
виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, 
то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

**Ответ:**

Я бы не стал совмещать разные системы полной или пара- виртуализации. Необходимо выбрать какую-то одну в зависимости от 
требований и финансовых возможностей.  
Использование контейниризации и полной или пара- виртуализации вполне допустимо, поскольку таким образом, можно лучшим способом 
утилизировать ресурсы большого сервера и защитить приложения друг от друга, запуская приложения в контейнерах в одних ВМ, 
в других ВМ можно выполнять другие задачи.

Недостатки:  
1. Требуется бОльшее количество специалистов с разными компетенциями для поддержки комплекса.
2. Низкая или наоборот через чур высокая утилизация аппаратных ресурсов серверов из-за невозможности миграции ВМ с одного 
гипервизора на гипервизор другой системы управления.

Проблемы:  
Собственно вытекают из недостатков  
1. проблематично поддерживать
2. Нет возможности балансировки нагрузки

Решение:  
Использовать одну систему виртуализации максимально соответствующую поставленным задачам и финансовым возможностям, 
с возможностью миграции ВМ между гипервизорами.
